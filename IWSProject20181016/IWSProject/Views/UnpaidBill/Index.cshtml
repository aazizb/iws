@using IWSProject.Content
<script type="text/javascript">

    var currentModelId = null;
    var balanced = true;

    function OnMBeginCallback(s, e) {
        if (currentModelId !== null) {
            e.customArgs["currentModelId"] = currentModelId;
            e.customArgs["balanced"] = balanced;
            currentModelId = null;
        }
    }
    function OnMEndCallback(s, e) {
        if (currentModelId !== null) {
            callbackPanelPartialView.PerformCallback();
        }
    }
    function CheckedChanged(s, e) {
        callbackPanelPartialView.PerformCallback({ currentModelId: ComboBoxModelId.GetValue(), balanced: s.GetChecked() });
    }
    function OnButtonClick() {
        if (unpaid.IsCustomizationWindowVisible()) {

            unpaid.HideCustomizationWindow();
        }
        else {
            unpaid.ShowCustomizationWindow();
        }
        UpdateButtonText();
    }
    function CustomizationWindowCloseUp(s, e) {
        UpdateButtonText();
    }
    function UpdateButtonText() {
        var text = unpaid.IsCustomizationWindowVisible() ? "Hide" : "Show";
        btShowCustomizationWindow.SetText(text);
    }
    function OnModelIdSelectionChanged() {
        currentModelId = ComboBoxModelId.GetValue();
        if (!callbackPanelPartialView.InCallback()) {
            callbackPanelPartialView.PerformCallback();
        }
    }
    function OnSubmitClick(s, e) {
        currentModelId = ComboBoxModelId.GetValue();
        balanced = CheckBoxBalanced.GetValue();
        callbackPanelPartialView.PerformCallback();
    }

</script>

@{
    ViewBag.Title = IWSLocalResource.Accounting;
}
@using (Html.BeginForm("Index", "UnpaidBill"))
{

    @Html.DevExpress().ComboBox(settings =>
{
    settings.Name = "ComboBoxModelId";
    settings.Width = Unit.Pixel(185);
    settings.Properties.IncrementalFilteringMode = IncrementalFilteringMode.StartsWith;
    settings.Properties.DropDownStyle = DropDownStyle.DropDown;
    settings.Properties.Items.Add("",0000);
    settings.Properties.Items.Add(IWSLocalResource.vendorinvoice, 112);
    settings.Properties.Items.Add(IWSLocalResource.CustomerInvoice, 122);
    settings.Properties.ClientSideEvents.SelectedIndexChanged = "function(s, e) { OnModelIdSelectionChanged(); }";
    settings.SelectedIndex = 0;
}).GetHtml()

    @Html.DevExpress().CheckBox(settings =>
{
    settings.Name = "CheckBoxBalanced";
    settings.Checked = true;
    settings.Text = IWSLocalResource.PaidBill;
    settings.Properties.ClientSideEvents.CheckedChanged = "CheckedChanged";
    settings.Properties.AllowGrayed = false;
}).GetHtml()

    @Html.DevExpress().Button( settings =>
{
    settings.Name = "btnSubmit";
    settings.ControlStyle.CssClass = "button";
    settings.Text = "";
    settings.ToolTip = IWSLocalResource.Validate;
    settings.Style[HtmlTextWriterStyle.MarginRight] = "5px";
    settings.Images.Image.IconID = IconID.ContentCheckbox16x16;
    settings.Width = Unit.Pixel(80);
    settings.UseSubmitBehavior = false;
    settings.ClientSideEvents.Click = "OnSubmitClick";
}
).GetHtml()

    @Html.DevExpress().Button(settings =>
    {
        settings.Name = "btShowCustomizationWindow";
        settings.Text = IWSLocalResource.WindowCustomization;
        settings.Width = Unit.Pixel(100);
        settings.UseSubmitBehavior = false;
        settings.ClientSideEvents.Click = "OnButtonClick";
    }).GetHtml()
    @Html.Partial("CallbackPanelPartialView")
}
